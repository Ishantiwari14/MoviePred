{% extends 'base.html' %}

{% block content %}
<head>
  <style>
 body {
      background-image: linear-gradient(to bottom, #000000, #303330);
      font-family: Arial, sans-serif;
    }
/* Center the form container */
.container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

/* Style the form container */
form {
  width: 400px;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 10px;
  background-color: #f9f9f9;
}

/* Style the form fields */
.form-field {
  margin-bottom: 15px;
}

.form-field label {
  display: block;
  font-weight: bold;
  margin-bottom: 5px;
  color: #333;
}

.form-field input[type="text"],
.form-field input[type="file"],
.form-field select {
  width: 80%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  font-size: 16px;
}

/* Style the form submit button */
button[type="submit"] {
  background-color:#E50914;
  color: #fff;
  padding: 12px 20px;
  border: none;
  border-radius: 5px;
  font-size: 18px;
  cursor: pointer;
  margin-left: 300px;
  transition: background-color 0.2s ease;
}

button[type="submit"]:hover {
  background-color: #8a2429;
}

/* Style the heading */
h2 {
  color: #E50914;
  margin-bottom: 20px;
}

/* Style the messages */
.messages {
  margin-top: 10px;
  padding: 10px;
  border-radius: 5px;
  background-color: #f0f0f0;
  font-size: 16px;
  color: #333;
}
  </style>
</head>
<body>  
  <div class="container">
   <form method="POST" enctype="multipart/form-data">
    <h2>User Profile</h2>
     {% csrf_token %}
     <div class="form-field">
      <label for="{{ form.profile_picture.id_for_label }}">Profile Picture:</label>
   {{ form.profile_picture }}
    </div>

    <div class="form-field">
      <label for="{{ form.phone_number.id_for_label }}">Phone Number:</label>
      {{ form.phone_number }}
    </div>

    <div class="form-field">
      <label for="{{ form.genre_preferences.id_for_label }}">Genre Preferences:</label>
      {{ form.genre_preferences }}
      <img id="profile_picture_preview" src="#" alt="Preview" style="max-width: 100px; display: none;">
    </div>

    <button type="submit">Save</button>
  </form></div>
   <script>
    const form = document.getElementById("profile-form");
    const profilePictureInput = document.getElementById("profile_picture");
    const profilePicturePreview = document.getElementById("profile_picture_preview");
    const formMessages = document.getElementById("form-messages");

    profilePictureInput.addEventListener("change", (event) => {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          profilePicturePreview.src = reader.result;
          profilePicturePreview.style.display = "block";
        };
        reader.readAsDataURL(file);
      }
    });

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      const formData = new FormData(form);
      // You can use fetch or submit the form to the server here.
      // Example:
      // fetch("/submit-profile", {
      //   method: "POST",
      //   body: formData,
      // })
      // .then(response => response.json())
      // .then(data => {
      //   formMessages.textContent = data.message;
      // });
      formMessages.textContent = "Profile updated successfully!";
    });
    
  </script>
</body>
{% endblock %}